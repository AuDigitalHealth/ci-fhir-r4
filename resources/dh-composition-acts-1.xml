<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="dh-composition-acts-1"/>
  <url value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-composition-acts-1"/>
  <version value="0.0.5"/>
  <name value="ADHACompositionACTS"/>
  <title value="ADHA Aged Care Transfer Summary Composition"/>
  <status value="draft"/>
  <experimental value="false"/>
  <publisher value="Australian Digital Health Agency"/>
  <contact>
    <telecom>
      <system value="email"/>
      <value value="help@digitalhealth.gov.au"/>
    </telecom>
  </contact>
  <description
    value="The purpose of this profile is to define a representation of an Aged Care Transfer Summary for a patient for the electronic exchange of health information between individuals, healthcare providers, and the My Health Record system infrastructure in Australia. A transfer summary includes critical information for exchange of information between providers of care when a patient moves between health care settings. A composition is a set of resources composed into a single coherent clinical statement that may have clinical attestation."/>
  <copyright
    value="Copyright © 2022 Australian Digital Health Agency - All rights reserved. Except for the material identified below, this content is licensed under a Creative Commons Attribution 4.0 International License. See https://creativecommons.org/licenses/by/4.0/. &#xa;&#xa;This material contains content from LOINC (http://loinc.org). LOINC is copyright © 1995-2021, Regenstrief Institute, Inc. and the Logical Observation Identifiers Names and Codes (LOINC) Committee and is available at no cost under the license at http://loinc.org/license. LOINC® is a registered United States trademark of Regenstrief Institute, Inc.&#xa;&#xa;All copies of this resource must include this copyright statement and all information contained in this statement."/>
  <fhirVersion value="4.0.1"/>
  <kind value="resource"/>
  <abstract value="false"/>
  <type value="Composition"/>
  <baseDefinition
    value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-composition-core-1"/>
  <derivation value="constraint"/>
  <differential>
    <element id="Composition">
      <path value="Composition"/>
      <short value="Aged Care Transfer Summary"/>
      <definition value="A transfer summary includes critical information for exchange of information between providers of care when a patient moves between health care settings."/>
    </element>
    <element id="Composition.status">
      <path value="Composition.status"/>
      <patternCode value="final"/>
    </element>
    <element id="Composition.category">
      <path value="Composition.category" />
      <slicing>
        <discriminator>
          <type value="pattern"/>
          <path value="$this"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
    </element>
    <element id="Composition.category:tss">
      <path value="Composition.category"/>
      <sliceName value="tss"/>      
      <short value="Transfer summary note"/>
      <min value="1"/>
      <max value="1" />
      <patternCodeableConcept>
        <coding>
          <system value="http://loinc.org"/>
          <code value="18761-7"/>
        </coding>
      </patternCodeableConcept>
    </element>
    <element id="Composition.author">
      <path value="Composition.author"/>
      <type>
        <code value="Reference"/>
        <targetProfile
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-practitionerrole-author-1"
        />
      </type>
    </element>
    <element id="Composition.section">
      <path value="Composition.section"/>
      <slicing>
        <discriminator>
          <type value="pattern"/>
          <path value="code"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
      <constraint>
        <key value="inv-dh-acts-01"/>
        <severity value="error"/>
        <human value="A section shall at least have an entry or an empty reason"/>
        <expression value="entry.exists() or emptyReason.exists()"/>
        <xpath value="exists(f:emptyReason) or exists(f:entry)"/>
        <source
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-composition-acts-1"/>
      </constraint>
      <constraint>
        <key value="inv-dh-acts-02"/>
        <severity value="error"/>
        <human
          value="All observations shall conform one of: ADHA Simple Observation, ADHA Diagnostic Result Observation"/>
        <expression
          value="entry.resolve().where($this is Observation).exists() implies entry.resolve().conformsTo('http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-observation-diagnosticresult-1')"/>
        <source
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-composition-acts-1"/>
      </constraint>
    </element>
    <element id="Composition.section.title">
      <path value="Composition.section.title"/>
      <min value="1"/>
    </element>
    <element id="Composition.section.emptyReason">
      <path value="Composition.section.emptyReason"/>
      <condition value="inv-dh-acts-01"/>
      <binding>
        <strength value="required"/>
        <valueSet
          value="https://healthterminologies.gov.au/fhir/ValueSet/health-summary-non-clinical-empty-reason-2"
        />
      </binding>
    </element>
    <element id="Composition.section:reasonForTransfer">
      <path value="Composition.section"/>
      <sliceName value="reasonForTransfer"/>
      <short value="Reason for transfer and notes"/>
      <definition value="TBD"/>
      <max value="1"/>
    </element>
    <element id="Composition.section:reasonForTransfer.code">
      <path value="Composition.section.code"/>
      <comment value="The code identifies the section for an automated processor of the document. When sharing health records it is important that globally adopted vocabulary is supported to allow for ubiquitous discovery, access, and re-use. To meet this need, where a consistent vocabulary and common syntax to achieve semantic interoperability is widely adopted internationally that code is adopted in Agency materials.&#xa;&#xa;The LOINC concept 42349-1 adopted for this section is aligned with the vocabulary in Consolidated CDA (C-CDA) and C-CDA on FHIR.&#xa;&#xa;If the section has content (instead of sub-sections), the section.code does not change the meaning or interpretation of the resource that is the content of the section in the comments for the section.code."/>
      <min value="1"/>
      <patternCodeableConcept>
        <coding>
          <system value="http://loinc.org"/>
          <code value="42349-1"/>
        </coding>
      </patternCodeableConcept>
    </element>
    <element id="Composition.section:reasonForTransfer.entry">
      <path value="Composition.section.entry"/>
      <type>
        <code value="Reference"/>
        <targetProfile
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-servicerequest-core-1"
        />
      </type>
      <condition value="inv-dh-acts-01"/>
    </element>
    <element id="Composition.section:advanceCareDirectives">
      <path value="Composition.section"/>
      <sliceName value="advanceCareDirectives"/>
      <short value="Information on advance care directives."/>
      <definition value="TBD"/>
      <max value="1"/>
    </element>
    <element id="Composition.section:advanceCareDirectives.code">
      <path value="Composition.section.code"/>
      <comment value="The code identifies the section for an automated processor of the document. When sharing health records it is important that globally adopted vocabulary is supported to allow for ubiquitous discovery, access, and re-use. To meet this need, where a consistent vocabulary and common syntax to achieve semantic interoperability is widely adopted internationally that code is adopted in Agency materials.&#xa;&#xa;The LOINC concept 42348-3 adopted for this section is aligned with the vocabulary in International Patient Summary (IPS), Consolidated CDA (C-CDA) and C-CDA on FHIR.&#xa;&#xa;If the section has content (instead of sub-sections), the section.code does not change the meaning or interpretation of the resource that is the content of the section in the comments for the section.code."/>
      <min value="1"/>
      <patternCodeableConcept>
        <coding>
          <system value="http://loinc.org"/>
          <code value="42348-3"/>
        </coding>
      </patternCodeableConcept>
    </element>
    <element id="Composition.section:advanceCareDirectives.entry">
      <path value="Composition.section.entry"/>
      <type>
        <code value="Reference"/>
        <targetProfile
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-consent-core-1"
        />
        <targetProfile
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-documentreference-core-1"
        />
        <targetProfile
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-documentreference-acp-1"
        />
      </type>
      <condition value="inv-dh-acts-01"/>
    </element>
    <element id="Composition.section:allergies">
      <path value="Composition.section"/>
      <sliceName value="allergies"/>
      <short value="Allergies"/>
      <definition
        value="Information about allergies or intolerances identified or reported during this encounter. This may include statements that a patient does not have an allergy or category of allergies."/>
      <max value="1"/>
    </element>
    <element id="Composition.section:allergies.code">
      <path value="Composition.section.code"/>
      <comment value="The code identifies the section for an automated processor of the document. When sharing health records it is important that globally adopted vocabulary is supported to allow for ubiquitous discovery, access, and re-use. To meet this need, where a consistent vocabulary and common syntax to achieve semantic interoperability is widely adopted internationally that code is adopted in Agency materials.&#xa;&#xa;The LOINC concept 48765-2 adopted for this section is aligned with the vocabulary in International Patient Summary (IPS), Consolidated CDA (C-CDA), and C-CDA on FHIR.&#xa;&#xa;The use of concept 101.20113 from the Agency's NCTIS (National Clinical Terminology and Information Service) Data Components code system is deprecated but may also be supplied as an additional coding or it may be present in older data. &#xa;&#xa;If the section has content (instead of sub-sections), the section.code does not change the meaning or interpretation of the resource that is the content of the section in the comments for the section.code."/>
      <min value="1"/>
      <patternCodeableConcept>
        <coding>
          <system value="http://loinc.org"/>
          <code value="48765-2"/>
        </coding>
      </patternCodeableConcept>
    </element>
    <element id="Composition.section:allergies.entry">
      <path value="Composition.section.entry"/>
      <type>
        <code value="Reference"/>
        <targetProfile
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-allergyintolerance-core-1"
        />
      </type>
      <condition value="inv-dh-acts-01"/>
    </element>
    <element id="Composition.section:vitalSigns">
      <path value="Composition.section"/>
      <sliceName value="vitalSigns"/>
      <short value="Vital signs"/>
      <definition
        value="Vital signs associated with a patient."/>
      <max value="1"/>
    </element>
    <element id="Composition.section:vitalSigns.code">
      <path value="Composition.section.code"/>
      <comment value="The code identifies the section for an automated processor of the document. When sharing health records it is important that globally adopted vocabulary is supported to allow for ubiquitous discovery, access, and re-use. To meet this need, where a consistent vocabulary and common syntax to achieve semantic interoperability is widely adopted internationally that code is adopted in Agency materials.&#xa;&#xa;The LOINC concept 8716-3 adopted for this section is aligned with the vocabulary in International Patient Summary (IPS), Consolidated CDA (C-CDA) and C-CDA on FHIR.&#xa;&#xa;If the section has content (instead of sub-sections), the section.code does not change the meaning or interpretation of the resource that is the content of the section in the comments for the section.code."/>
      <min value="1"/>
      <patternCodeableConcept>
        <coding>
          <system value="http://loinc.org"/>
          <code value="8716-3"/>
        </coding>
      </patternCodeableConcept>
    </element>
    <element id="Composition.section:vitalSigns.entry">
      <path value="Composition.section.entry"/>
      <type>
        <code value="Reference"/>
        <targetProfile
          value="http://hl7.org.au/fhir/StructureDefinition/au-vitalspanel"
        />
        <targetProfile
          value="http://hl7.org.au/fhir/StructureDefinition/au-bloodpressure"
        />
        <targetProfile
          value="http://hl7.org.au/fhir/StructureDefinition/au-bodyweight"
        />
        <targetProfile
          value="http://hl7.org.au/fhir/StructureDefinition/au-bodyheight"
        />
        <targetProfile
          value="http://hl7.org.au/fhir/StructureDefinition/au-bmi"
        />
        <targetProfile
          value="http://hl7.org.au/fhir/StructureDefinition/au-oxygensat"
        />
        <targetProfile
          value="http://hl7.org.au/fhir/StructureDefinition/au-headcircum"
        />
        <targetProfile
          value="http://hl7.org.au/fhir/StructureDefinition/au-heartrate"
        />
        <targetProfile
          value="http://hl7.org.au/fhir/StructureDefinition/au-bodytemp"
        />
        <targetProfile
          value="http://hl7.org.au/fhir/StructureDefinition/au-resprate"
        />
      </type>
      <condition value="inv-dh-acts-01"/>
      <condition value="inv-dh-acts-02"/>
    </element>
    <element id="Composition.section:immunisations">
      <path value="Composition.section"/>
      <sliceName value="immunisations"/>
      <short value="Immunisations"/>
      <definition
        value="Information about the immunisation history, i.e. administered vaccines, of a patient."/>
      <max value="1"/>
      <constraint>
        <key value="inv-dh-acts-08"/>
        <severity value="error"/>
        <human
          value="At most one assertion of no relevant finding shall be present and it shall assert no history of vaccination"/>
        <expression
          value="entry.resolve().where($this is Observation).exists() implies (entry.count() &lt; 2 and (entry.resolve().valueCodeableConcept.coding.code) ='1234401000168109')"/>
        <source
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-composition-acts-1"/>
      </constraint>
      <constraint>
        <key value="inv-dh-acts-09"/>
        <severity value="error"/>
        <human
          value="At most one list shall be present"/>
        <expression
          value="entry.resolve().where($this is List).exists() implies entry.count() &lt; 2"/>
        <source
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-composition-acts-1"/>
      </constraint>
    </element>
    <element id="Composition.section:immunisations.code">
      <path value="Composition.section.code"/>
      <comment value="The code identifies the section for an automated processor of the document. When sharing health records it is important that globally adopted vocabulary is supported to allow for ubiquitous discovery, access, and re-use. To meet this need, where a consistent vocabulary and common syntax to achieve semantic interoperability is widely adopted internationally that code is adopted in Agency materials.&#xa;&#xa;The LOINC concept 11369-6 adopted for this section is aligned with the vocabulary in International Patient Summary (IPS), Consolidated CDA (C-CDA) and C-CDA on FHIR.&#xa;&#xa;The use of concept 101.16638 from the Agency's NCTIS (National Clinical Terminology and Information Service) Data Components code system is deprecated but may also be supplied as an additional coding or it may be present in older data.&#xa;&#xa;If the section has content (instead of sub-sections), the section.code does not change the meaning or interpretation of the resource that is the content of the section in the comments for the section.code."/>
      <min value="1"/>
      <patternCodeableConcept>
        <coding>
          <system value="http://loinc.org"/>
          <code value="11369-6"/>
        </coding>
      </patternCodeableConcept>
    </element>
    <element id="Composition.section:immunisations.entry">
      <path value="Composition.section.entry"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-list-immunization-1"/>
        <targetProfile
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-immunization-core-1"/>
        <targetProfile value="http://hl7.org.au/fhir/StructureDefinition/au-norelevantfinding"/>
      </type>
      <condition value="inv-dh-acts-01"/>
      <condition value="inv-dh-acts-02"/>
      <condition value="inv-dh-acts-08"/>
      <condition value="inv-dh-acts-09"/>
    </element>
    <element id="Composition.section:medicalDevices">
      <path value="Composition.section"/>
      <sliceName value="medicalDevices"/>
      <short value="Medical devices"/>
      <definition
        value="Information about the medical device (medical equipment) use defines a patient's implanted and external medical devices and equipment that their health status depends on, as well as any pertinent equipment or device history."/>
      <max value="1"/>
      <constraint>
        <key value="inv-dh-acts-10"/>
        <severity value="error"/>
        <human
          value="At most one assertion of no relevant finding shall be present"/>
        <expression
          value="entry.resolve().where($this is Observation).exists() implies entry.count() &lt; 2"/>
        <source
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-composition-acts-1"/>
      </constraint>
    </element>
    <element id="Composition.section:medicalDevices.code">
      <path value="Composition.section.code"/>
      <comment value="The code identifies the section for an automated processor of the document. When sharing health records it is important that globally adopted vocabulary is supported to allow for ubiquitous discovery, access, and re-use. To meet this need, where a consistent vocabulary and common syntax to achieve semantic interoperability is widely adopted internationally that code is adopted in Agency materials.&#xa;&#xa;The LOINC concept 46264-8 adopted for this section is aligned with the vocabulary in International Patient Summary (IPS), Consolidated CDA (C-CDA) and C-CDA on FHIR.&#xa;&#xa;If the section has content (instead of sub-sections), the section.code does not change the meaning or interpretation of the resource that is the content of the section in the comments for the section.code."/>
      <min value="1"/>
      <patternCodeableConcept>
        <coding>
          <system value="http://loinc.org"/>
          <code value="46264-8"/>
        </coding>
      </patternCodeableConcept>
    </element>
    <element id="Composition.section:medicalDevices.entry">
      <path value="Composition.section.entry"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-device-implantable-1"/>
        <targetProfile value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-device-wearable-1"/>
        <targetProfile
          value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-deviceusestatement-core-1"/>
        <targetProfile value="http://hl7.org.au/fhir/StructureDefinition/au-norelevantfinding"/>
      </type>
      <condition value="inv-dh-acts-01"/>
      <condition value="inv-dh-acts-02"/>
      <condition value="inv-dh-acts-10"/>
    </element>
  </differential>
</StructureDefinition>
