<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="dh-explanationofbenefit-medicare-pbs-1"/>
  <url value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-explanationofbenefit-medicare-pbs-1"/>
  <version value="0.0.1"/>
  <name value="DHExplanationofBenefitPBS"/>
  <title value="ADHA Record of Claim against PBS or RPBS"/>
  <status value="draft"/>
  <experimental value="false"/>
  <publisher value="Australian Digital Health Agency"/>
  <contact>
    <telecom>
      <system value="email"/>
      <value value="help@digitalhealth.gov.au"/>
    </telecom>
  </contact>
  <description value="This profile defines a record of the claim of an item claimed against the Pharmaceutical Benefits Schedule (PBS) or Repatriation Pharmaceutical Benefits Scheme (RPBS) for the electronic exchange of digital health information between individuals, healthcare providers, and the My Health Record system infrastructure in Australia."/>
  <copyright value="Copyright © 2022 Australian Digital Health Agency - All rights reserved. This content is licensed under a Creative Commons Attribution 4.0 International License. See https://creativecommons.org/licenses/by/4.0/." />
  <fhirVersion value="4.0.1" />
  <kind value="resource"/>
  <abstract value="false"/>
  <type value="ExplanationOfBenefit"/>
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/ExplanationOfBenefit"/>
  <derivation value="constraint"/>
  <differential>
    <element id="ExplanationOfBenefit">
      <path value="ExplanationOfBenefit"/>
      <short value="Record of Claim against PBS or RPBS"/>
      <definition value="A record of the claim of an item claimed against the Pharmaceutical Benefits Schedule (PBS) or Repatriation Pharmaceutical Benefits Scheme (RPBS). PBS claim items include information about pharmaceutical items prescribed and dispensed to an individual that were partially or fully funded under the PBS or Repatriation Pharmaceutical Benefits Scheme (RPBS)."/>
      <constraint>
        <key value="inv-dh-eob-pbs-01"/>
        <severity value="error"/>
        <human value="The patient shall at least have a reference or an identifier with at least a system and a value"/>
        <expression value="patient.reference.exists() or patient.identifier.where(system.count() + value.count() &gt;1).exists()"/>
        <source value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-explanationofbenefit-medicare-pbs-1"/>
      </constraint>
    </element>
    <element id="ExplanationOfBenefit.identifier">
      <path value="ExplanationOfBenefit.identifier"/>
      <min value="1"/>
      <mustSupport value="true"/>
    </element>
    <element id="ExplanationOfBenefit.status">
      <path value="ExplanationOfBenefit.status"/>
      <fixedCode value="active"/>
    </element>
    <element id="ExplanationOfBenefit.type">
      <path value="ExplanationOfBenefit.type"/>
      <patternCodeableConcept>
        <coding>
          <system value="http://terminology.hl7.org/CodeSystem/claim-type" />
          <code value="pharmacy" />
        </coding>
      </patternCodeableConcept>
      <mustSupport value="true"/>
    </element>
    <element id="ExplanationOfBenefit.subType">
      <path value="ExplanationOfBenefit.subType"/>
      <min value="1"/>
      <mustSupport value="true"/>
      <binding>
        <strength value="required"/>
        <valueSet value="https://healthterminologies.gov.au/fhir/ValueSet/australian-medicare-benefit-claim-category-1"/>
      </binding>
    </element>
    <element id="ExplanationOfBenefit.use">
      <path value="ExplanationOfBenefit.use"/>
      <fixedCode value="claim"/>
    </element>
    <element id="ExplanationOfBenefit.patient">
      <path value="ExplanationOfBenefit.patient"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-patient-core-1"/>
      </type>
      <mustSupport value="true"/>
    </element>
    <element id="ExplanationOfBenefit.created">
      <path value="ExplanationOfBenefit.created"/>
      <mustSupport value="true"/>
    </element>
    <element id="ExplanationOfBenefit.insurer">
      <path value="ExplanationOfBenefit.insurer"/>
      <short value="Australian Government department that subsidises the benefits scheme"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-organization-core-1"/>
      </type>
    </element>
    <element id="ExplanationOfBenefit.provider">
      <path value="ExplanationOfBenefit.provider"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-practitioner-core-1"/>
        <targetProfile value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-practitionerrole-core-1"/>
      </type>
      <mustSupport value="true"/>
    </element>
    <element id="ExplanationOfBenefit.priority">
      <path value="ExplanationOfBenefit.priority"/>
      <binding>
        <strength value="example"/>
        <valueSet value="http://hl7.org/fhir/ValueSet/process-priority"/>
      </binding>
    </element>
    <element id="ExplanationOfBenefit.prescription">
      <path value="ExplanationOfBenefit.prescription"/>
      <min value="1"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://ns.electronichealth.net.au/fhir/StructureDefinition/dh-medicationrequest-pbs-claim-1"/>
      </type>
      <mustSupport value="true"/>
    </element>
    <element id="ExplanationOfBenefit.outcome">
      <path value="ExplanationOfBenefit.outcome"/>
      <fixedCode value="complete"/>
    </element>
    <element id="ExplanationOfBenefit.insurance.focal">
      <path value="ExplanationOfBenefit.insurance.focal"/>
      <fixedBoolean value="true"/>
    </element>
    <element id="ExplanationOfBenefit.item">
      <path value="ExplanationOfBenefit.item"/>
      <min value="1"/>
      <max value="1"/>
      <mustSupport value="true"/>
    </element>
    <element id="ExplanationOfBenefit.item.sequence">
      <path value="ExplanationOfBenefit.item.sequence"/>
      <fixedPositiveInt value="1"/>
      <mustSupport value="true"/>
    </element>
    <element id="ExplanationOfBenefit.item.category">
      <path value="ExplanationOfBenefit.item.category"/>
      <min value="1"/>
      <mustSupport value="true"/>
      <binding>
        <strength value="extensible"/>
        <valueSet value="https://healthterminologies.gov.au/fhir/ValueSet/australian-medicare-benefit-claim-category-1"/>
      </binding>
    </element>
    <element id="ExplanationOfBenefit.item.productOrService">
      <path value="ExplanationOfBenefit.item.productOrService"/>
      <short value="PBS Billing code"/>
      <definition value="The billing code the service was claimed with against the Australian Department of Health Modified PBS Schedule Item (urn:oid:1.2.36.1.2001.1005.22)."/>
      <comment value="The code as instantiated may be padded with leading zeros when compared with the original (as published by the Department of Health)."/>
      <patternCodeableConcept>
        <coding>
          <system value="urn:oid:1.2.36.1.2001.1005.22"/>
        </coding>
      </patternCodeableConcept>
      <mustSupport value="true"/>
    </element>
    <element id="ExplanationOfBenefit.item.serviced[x]">
      <path value="ExplanationOfBenefit.item.serviced[x]"/>
      <min value="1"/>
      <mustSupport value="true"/>
    </element>
    <element id="ExplanationOfBenefit.item.quantity">
      <path value="ExplanationOfBenefit.item.quantity"/>
      <mustSupport value="true"/>
    </element>
  </differential>
</StructureDefinition>
